@{
    ViewBag.Title = "Create Meeting";
    Layout = "~/Views/Shared/_AboutLayout.cshtml";
}
@using StudentDashboard.Models.Instructor;
@model JitsiMeetingModal
<script src="../../Scripts/vendor/jquery/jquery.min.js"></script>
<script src='https://goodpathshala.com/external_api.js'></script>
<div id="meet"></div>

<section class="ftco-section ftco-no-pt ftc-no-pb">
    <div class="container">
        <div class="row">
            <div class="col-md-12  wrap-about py-5 wrap-about bg-light">
                <div class="text px-4 ftco-animate">
                    <h1 class="mb-4"><img src="~/Images/jitsi-logo.png"> Welcome to ReadMyCourse Classroom</h1>
                    <h3 class="text-danger">
                        Secure, fully featured, and completely free video conferencing powered by <a href="https://jitsi.org/">Jitsi Meet.</a>
                    </h3>
                    @*<p><a href="#" class="btn btn-secondary px-4 py-3">Read More</a></p>*@
                </div>
            </div>

        </div>
    </div>
</section>
<section class="ftco-section ftco-counter img" id="section-counter" style="padding-top:2rem;"  data-stellar-background-ratio="0.5">
    <div class="container shadow">
        <div class="row justify-content-center mb-5 pb-2">
            <div class="col-md-8 text-center heading-section heading-section-black ftco-animate">
                <h2 class="mb-4"><span>Create</span> Meeting</h2>
                <div class="embed-responsive embed-responsive-16by9">
                    <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/hHTWpw1Gudw" allowfullscreen></iframe>
                </div>
            </div>
        </div>
        <div class="row d-md-flex align-items-center justify-content-center">
            <div class="col-lg-10">
               
            </div>
        </div>
    </div>
</section>

<script>
    const domain = 'meet.jit.si';
    const options = {
        roomName: "@Model.m_strMeetingName",
        parentNode: document.querySelector('#meet'),
        userInfo: {
            displayName: 'Anand Kumar'
        }
    };
    const api = new JitsiMeetExternalAPI(domain, options);
    api.addEventListener('participantRoleChanged', function (event) {
        if (event.role === "moderator") {
            api.executeCommand('password', "@Model.m_strMeetingPassword");
        }
    });
    // join a protected channel
    //api.on('passwordRequired', function () {
    //    api.executeCommand('password', 'The Password');
    //});
    api.executeCommand('toggleAudio');
    api.executeCommand('toggleVideo');
    api.executeCommand('subject', 'New Conference Subject');
    api.executeCommand('setVideoQuality', 720);
    api.executeCommand('muteEveryone');
    api.on({
        roomName: string // the room name of the conference
    })
    // join a protected channel
    api.on('videoConferenceLeft ', function () {
        window.location.href = 'https://readmycourse.com';
    });
    //api.executeCommand('avatarUrl', 'https://readmycourse.com/Images/site-logo.png');
</script>